version: 2

models:
  - name: stg_assets
    description: "Staging model for raw asset records with explicit type casting."
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - created_at
            - seller_name
            - buyer_tax_id
            - buyer_state
          config:
            severity: warn
    columns:
      - name: created_at
        description: "Timestamp of the asset creation."
      - name: collection_status
        description: "Status of the asset (for example, Settled or Canceled)."
        data_tests:
          - accepted_values:
              arguments:
                values: ['Settled', 'Open', 'Repaid', 'ProcessingPayment', 'Default', 'Canceled']
      - name: face_value
        description: "Receivable face value in BRL."
      - name: settled_at
        description: "Timestamp when the money was actually repaid."
      - name: due_date
        description: "Date when repayment is expected."
      - name: buyer_tax_id
        description: "CNPJ of the buyer."
      - name: seller_name
        description: "Name of the seller."
      - name: buyer_state
        description: "Buyer state code (for example, SP, MT, CE)."
